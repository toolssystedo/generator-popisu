<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shoptet Description Generator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚úçÔ∏è</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo">
                        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Shoptet Description Generator</h1>
                        <p>Automatick√© generov√°n√≠ produktov√Ωch popis≈Ø pomoc√≠ AI</p>
                    </div>
                </div>
                <button id="darkModeToggle" class="dark-mode-toggle" title="P≈ôepnout re≈æim">
                    <span class="icon-light">‚òÄÔ∏è</span>
                    <span class="icon-dark">üåô</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Info Card -->
                <div class="info-card">
                    <h3 class="info-card-title">
                        <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Jak to funguje?
                    </h3>

                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <p class="step-title">Nahrajte XLSX export ze Shoptetu</p>
                                <p class="step-desc">Soubor mus√≠ obsahovat sloupce: code, name, description, shortDescription</p>
                                <p class="step-desc">Pro zobrazen√≠ ≈°ablony exportu kliknƒõte <a href="#" class="template-link" data-lightbox="assets/sablona-exportu.jpg">zde</a>. Dal≈°√≠ vƒõci v exportu nepot≈ôebujete, ƒç√≠m v√≠ce vƒõc√≠ tam bude, t√≠m v√≠ce se toho m≈Ø≈æe rozb√≠t.</p>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <p class="step-title">Zadejte API kl√≠ƒç (Anthropic)</p>
                                <p class="step-desc">API kl√≠ƒç z√≠sk√°te na console.anthropic.com</p>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <p class="step-title">Spus≈•te automatick√© zpracov√°n√≠</p>
                                <p class="step-desc">AI vygeneruje kr√°tk√© popisy z dlouh√Ωch popis≈Ø produkt≈Ø</p>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <p class="step-title">St√°hnƒõte upraven√Ω soubor</p>
                                <p class="step-desc">Soubor obsahuje novƒõ vygenerovan√© kr√°tk√© popisy ve sloupci shortDescription</p>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <p class="step-title">Naimportujte upraven√Ω soubor</p>
                                <p class="step-desc">1. V lev√©m menu otev≈ôete "Produkty" a "Import"</p>
                                <p class="step-desc">2. V otev≈ôen√©m importu v p≈ô√≠padƒõ pot≈ôeby zmƒõ≈àte nastaven√≠ <a href="#" class="template-link" data-lightbox="assets/import-produktu.jpg">podle n√°vodu</a></p>
                                <p class="step-desc">3. Vyberte novƒõ sta≈æen√Ω soubor a v horn√≠ ƒç√°sti pomoc√≠ tlaƒç√≠tka "Import" naimportujte</p>
                                <p class="step-desc">Pro zobrazen√≠ n√°vodu kliknƒõte <a href="#" class="template-link" data-lightbox="assets/import-produktu.jpg">zde</a></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Card -->
                <div class="card">
                    <!-- Upload Zone -->
                    <div id="uploadZone" class="upload-zone">
                        <input type="file" id="fileInput" accept=".xlsx,.xls" hidden>
                        <div class="upload-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </div>
                        <div class="upload-text">
                            <p class="upload-title">P≈ôet√°hnƒõte XLSX soubor sem</p>
                            <p class="upload-subtitle">nebo <span class="upload-link">kliknƒõte pro v√Ωbƒõr</span></p>
                        </div>
                        <div class="upload-formats">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <span>Podporovan√© form√°ty: .xlsx, .xls</span>
                        </div>
                    </div>

                    <!-- File Info (hidden by default) -->
                    <div id="fileInfo" class="file-info hidden">
                        <div class="file-info-header">
                            <div class="file-icon">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                            </div>
                            <div class="file-details">
                                <p class="file-name" id="fileName">soubor.xlsx</p>
                                <p class="file-stats" id="fileStats">Naƒç√≠t√°m...</p>
                            </div>
                            <button id="removeFile" class="remove-file-btn" title="Odebrat soubor">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <div class="file-stats-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="totalProducts">0</span>
                                <span class="stat-label">Celkem produkt≈Ø</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="withDescription">0</span>
                                <span class="stat-label">S dlouh√Ωm popisem</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="processable">0</span>
                                <span class="stat-label">Ke zpracov√°n√≠</span>
                            </div>
                        </div>
                    </div>

                    <!-- API Key Section -->
                    <div id="apiKeySection" class="api-key-section hidden">
                        <label for="apiKeyInput" class="api-key-label">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                            </svg>
                            Anthropic API kl√≠ƒç
                        </label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="apiKeyInput" class="api-key-input" placeholder="sk-ant-api03-...">
                            <button id="toggleApiKey" class="toggle-api-key" title="Zobrazit/skr√Ωt">
                                <svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                </svg>
                            </button>
                        </div>
                        <div class="api-key-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="saveApiKey" checked>
                                <span>Zapamatovat v prohl√≠≈æeƒçi</span>
                            </label>
                            <a href="https://console.anthropic.com/" target="_blank" class="api-key-link">Z√≠skat API kl√≠ƒç</a>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div id="settingsSection" class="settings-section hidden">
                        <h4 class="settings-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            Nastaven√≠ generov√°n√≠
                        </h4>
                        <div class="settings-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="justifyText">
                                <span>Zarovnat popisy do bloku (text-align: justify)</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="addBulletPoints">
                                <span>P≈ôidat odr√°≈æky s benefity (3‚Äì6 kl√≠ƒçov√Ωch v√Ωhod)</span>
                            </label>
                        </div>

                        <!-- Link Phrases Section -->
                        <div class="link-phrases-section">
                            <label class="checkbox-label">
                                <input type="checkbox" id="useLinkPhrases">
                                <span>Prolinkov√°n√≠ fr√°z√≠ (Slovn√≠k pojm≈Ø)</span>
                            </label>
                            <div id="linkPhrasesSection" class="link-phrases-input-section hidden">
                                <label for="linkPhrasesInput" class="link-phrases-label">Fr√°ze pro prolinkov√°n√≠</label>
                                <textarea id="linkPhrasesInput" class="link-phrases-textarea" placeholder="Zadejte fr√°ze oddƒõlen√© ƒç√°rkou, nap≈ô.: Tepl√°ky, Tenisky, Triƒçka, Mikiny"></textarea>
                                <p class="link-phrases-hint">Fr√°ze budou pou≈æity v p≈ôesn√©m tvaru pro automatick√© prolinkov√°n√≠ dopl≈àkem Slovn√≠k pojm≈Ø</p>
                            </div>
                        </div>

                        <!-- Tone Selection -->
                        <div class="tone-section">
                            <h5 class="tone-title">T√≥n popisu</h5>
                            <div class="tone-options">
                                <label class="radio-label">
                                    <input type="radio" name="toneSelection" value="neutral" checked>
                                    <span class="radio-text">Neutr√°ln√≠</span>
                                    <span class="radio-desc">Vyv√°≈æen√Ω, informativn√≠ styl</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="toneSelection" value="professional">
                                    <span class="radio-text">Profesion√°ln√≠</span>
                                    <span class="radio-desc">Form√°ln√≠, elegantn√≠, vƒõcn√Ω</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="toneSelection" value="funny">
                                    <span class="radio-text">Vtipn√Ω</span>
                                    <span class="radio-desc">Neform√°ln√≠, hrav√Ω, uvolnƒõn√Ω</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="toneSelection" value="custom">
                                    <span class="radio-text">Vlastn√≠ styl</span>
                                    <span class="radio-desc">Napodob√≠ styl uk√°zkov√©ho popisu</span>
                                </label>
                            </div>
                            <div id="customToneSection" class="custom-tone-section hidden">
                                <label for="customToneExample" class="custom-tone-label">Uk√°zkov√Ω popis</label>
                                <textarea id="customToneExample" class="custom-tone-textarea" placeholder="Vlo≈æte uk√°zkov√Ω popis, jeho≈æ styl chcete napodobit..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Process Button -->
                    <button id="processBtn" class="process-btn hidden">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        Spustit zpracov√°n√≠
                    </button>

                    <!-- Processing Progress -->
                    <div id="processingSection" class="processing-section hidden">
                        <div class="progress-header">
                            <span class="progress-title">Zpracov√°n√≠ produkt≈Ø</span>
                            <span class="progress-percent" id="progressPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-stats">
                            <span id="progressCurrent">0</span> / <span id="progressTotal">0</span> produkt≈Ø
                            <span class="progress-time" id="progressTime"></span>
                        </div>
                        <div class="progress-log" id="progressLog">
                            <p class="log-entry">P≈ôipravuji zpracov√°n√≠...</p>
                        </div>
                        <button id="cancelBtn" class="cancel-btn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                            Zru≈°it zpracov√°n√≠
                        </button>
                    </div>

                    <!-- Results Section -->
                    <div id="resultsSection" class="results-section hidden">
                        <div class="results-header">
                            <svg class="results-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <h3>Zpracov√°n√≠ dokonƒçeno</h3>
                        </div>

                        <div class="results-grid">
                            <div class="result-item result-success">
                                <span class="result-value" id="resultSuccess">0</span>
                                <span class="result-label">√öspƒõ≈°nƒõ zpracov√°no</span>
                            </div>
                            <div class="result-item result-skipped">
                                <span class="result-value" id="resultSkippedEmpty">0</span>
                                <span class="result-label">P≈ôeskoƒçeno (pr√°zdn√Ω popis)</span>
                            </div>
                            <div class="result-item result-skipped">
                                <span class="result-value" id="resultSkippedShort">0</span>
                                <span class="result-label">P≈ôeskoƒçeno (kr√°tk√Ω popis)</span>
                            </div>
                            <div class="result-item result-error">
                                <span class="result-value" id="resultErrors">0</span>
                                <span class="result-label">Chyby</span>
                            </div>
                        </div>

                        <button id="downloadBtn" class="download-btn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            St√°hnout upraven√Ω XLSX
                        </button>

                        <button id="previewBtn" class="preview-btn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            Zobrazit n√°hled zmƒõn
                        </button>

                        <button id="resetBtn" class="reset-btn">
                            Zpracovat dal≈°√≠ soubor
                        </button>
                    </div>

                    <!-- Preview Modal -->
                    <div id="previewModal" class="modal hidden">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>N√°hled zmƒõn</h3>
                                <button id="closePreview" class="modal-close">
                                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                            <div class="modal-body" id="previewContent">
                                <!-- Preview items will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <!-- Lightbox Modal -->
                    <div id="lightboxModal" class="lightbox-modal hidden">
                        <div class="lightbox-overlay"></div>
                        <div class="lightbox-content">
                            <button class="lightbox-close" title="Zav≈ô√≠t">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                            <img id="lightboxImage" src="" alt="≈†ablona exportu">
                        </div>
                    </div>

                    <!-- Error Section -->
                    <div id="errorSection" class="error-section hidden">
                        <div class="error-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <p class="error-message" id="errorMessage">Do≈°lo k chybƒõ</p>
                        <button id="errorResetBtn" class="reset-btn">Zkusit znovu</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Shoptet Description Generator</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/excel.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
